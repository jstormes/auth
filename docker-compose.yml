version: '3'

services:
  server:
    image: jstormes/loopback-world
    environment:
      XDEBUG_CONFIG: remote_host=docker.for.win.localhost remote_port=$XDEBUG_REMOTE_PORT
#      XDEBUG_CONFIG: remote_host=docker.for.mac.localhost remote_port=$XDEBUG_REMOTE_PORT
      MYSQL_PWD: naked
      OAUTH_DBNAME: oauth2
      OAUTH_DBUSER: oauth2
      OAUTH_DBPASS: oauthuser
    networks:
      - net
    ports:
      - 443:443
      - 80:80
      # - 3306:3306
    volumes:
      - ./:/var/www
  bash:
    image: jstormes/loopback-world
    environment:
      XDEBUG_CONFIG: remote_host=docker.for.win.localhost remote_port=$XDEBUG_REMOTE_PORT
#      XDEBUG_CONFIG: remote_host=docker.for.mac.localhost remote_port=$XDEBUG_REMOTE_PORT
      MYSQL_PWD: naked
      OAUTH_DBNAME: oauth2
      OAUTH_DBUSER: oauth2
      OAUTH_DBPASS: oauthuser
    networks:
      - net
    volumes:
      - ./:/var/www
      - ./:/opt/project
    working_dir: /opt/project
    entrypoint: bash
networks:
  net:
    driver: bridge